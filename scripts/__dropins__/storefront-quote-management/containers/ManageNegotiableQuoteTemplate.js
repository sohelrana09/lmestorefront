/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as t,jsxs as o}from"@dropins/tools/preact-jsx-runtime.js";import{useState as M,useEffect as I,useMemo as c}from"@dropins/tools/preact-compat.js";import{classes as n,VComponent as i,Slot as r,getGlobalLocale as R}from"@dropins/tools/lib.js";import{events as w}from"@dropins/tools/event-bus.js";import{Skeleton as H,SkeletonRow as u}from"@dropins/tools/components.js";/* empty css                                     */import"@dropins/tools/preact.js";import"@dropins/tools/preact-hooks.js";/* empty css                        *//* empty css                                  */import{T as S}from"../chunks/TabbedContent.js";/* empty css                          */import"../chunks/state.js";import{I as W}from"../chunks/ItemsQuotedTemplate.js";import{Q as k}from"../chunks/QuoteTemplateCommentsList.js";import{Q as z}from"../chunks/QuoteTemplateHistoryLog.js";import{useText as O}from"@dropins/tools/i18n.js";import"../chunks/QuotePricesSummary.js";import"../chunks/QuoteCommentsList.js";import"../chunks/QuoteHistoryLog.js";import"../chunks/dateUtils.js";const j=({className:e,loading:Q,templateName:a,templateId:b,banner:h,details:T,actionBar:m,referenceDocuments:g,referenceDocumentsTitle:d,itemsTable:q,commentsTitle:f,comments:_,historyLogTitle:N,historyLog:y,footer:L,...v})=>Q?t(F,{}):o("div",{...v,className:n(["quote-management-manage-negotiable-quote-template",e]),children:[o("div",{className:n(["quote-management-manage-negotiable-quote-template__header"]),children:[a&&t(i,{node:a,className:n(["quote-management-manage-negotiable-quote-template__template-name"])}),b&&t(i,{node:b,className:n(["quote-management-manage-negotiable-quote-template__template-id"])})]}),h&&t(i,{node:h,className:n(["quote-management-manage-negotiable-quote-template__banner"])}),T&&t(i,{node:T,className:n(["quote-management-manage-negotiable-quote-template__details"])}),m&&t(i,{node:m,className:n(["quote-management-manage-negotiable-quote-template__action-bar"])}),(d||g)&&o("div",{"data-testid":"reference-documents-container",className:n(["quote-management-manage-negotiable-quote-template__reference-documents-container"]),children:[d&&t(i,{node:d,className:n(["quote-management-manage-negotiable-quote-template__reference-documents-title"])}),g&&t(i,{node:g,className:n(["quote-management-manage-negotiable-quote-template__reference-documents"])})]}),q&&t(i,{node:q,className:n(["quote-management-manage-negotiable-quote-template__items-table"])}),o("div",{"data-testid":"comments-container",className:n(["quote-management-manage-negotiable-quote-template__comments-container"]),children:[f&&t(i,{node:f,className:n(["quote-management-manage-negotiable-quote-template__comments-title"])}),_&&t(i,{node:_,className:n(["quote-management-manage-negotiable-quote-template__comments"])})]}),o("div",{"data-testid":"history-log-container",className:n(["quote-management-manage-negotiable-quote-template__history-log-container"]),children:[N&&t(i,{node:N,className:n(["quote-management-manage-negotiable-quote-template__history-log-title"])}),y&&t(i,{node:y,className:n(["quote-management-manage-negotiable-quote-template__history-log"])})]}),L&&t(i,{node:L,className:n(["quote-management-manage-negotiable-quote-template__footer"])})]}),F=()=>o(H,{"data-testid":"manage-negotiable-quote-template-skeleton",children:[t(u,{variant:"heading",fullWidth:!0,size:"large"}),t(u,{variant:"row",fullWidth:!1,size:"small"}),t(u,{variant:"row",fullWidth:!1,size:"small"}),t(u,{variant:"row",fullWidth:!0}),t(u,{variant:"row",fullWidth:!0,size:"xlarge",lines:2}),t(u,{variant:"row",fullWidth:!1,size:"small"})]}),ce=({slots:e,...Q})=>{const[a,b]=M(void 0),[h,T]=M(!0),m=O({createdLabel:"NegotiableQuoteTemplate.Manage.createdLabel",salesRepLabel:"NegotiableQuoteTemplate.Manage.salesRepLabel",expiresLabel:"NegotiableQuoteTemplate.Manage.expiresLabel",referenceDocumentsTitle:"NegotiableQuoteTemplate.Manage.referenceDocuments.title",commentsTitle:"NegotiableQuoteTemplate.Manage.comments.title",historyLogTitle:"NegotiableQuoteTemplate.Manage.historyLog.title",itemsQuotedTab:"NegotiableQuoteTemplate.Manage.tabs.itemsQuoted",commentsTab:"NegotiableQuoteTemplate.Manage.tabs.comments",historyLogTab:"NegotiableQuoteTemplate.Manage.tabs.historyLog"});I(()=>{const l=w.on("quote-management/quote-template-data",p=>{p.quoteTemplate&&(b(p.quoteTemplate),T(!1))},{eager:!0});return()=>l==null?void 0:l.off()},[]);const g=c(()=>t(r,{name:"TemplateName",slot:e==null?void 0:e.TemplateName,context:{templateName:a==null?void 0:a.name,templateData:a},children:t("h1",{"data-testid":"template-name",children:a==null?void 0:a.name})}),[e==null?void 0:e.TemplateName,a]),d=c(()=>t(r,{name:"TemplateId",slot:e==null?void 0:e.TemplateId,context:{templateId:a==null?void 0:a.uid,templateData:a},children:o("div",{"data-testid":"template-id",children:["Template #",a==null?void 0:a.uid]})}),[e==null?void 0:e.TemplateId,a]),q=c(()=>{if(!a)return null;const l=R()||"en-US",p=new Intl.DateTimeFormat(l,{year:"numeric",month:"long",day:"numeric"});let x;if(a.expirationDate)try{x=p.format(new Date(a.expirationDate))}catch{x=a.expirationDate}return o(r,{name:"Details",slot:e==null?void 0:e.Details,context:{templateData:a},children:[o("div",{className:"quote-management-manage-negotiable-quote-template__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote-template__detail-title","data-testid":"created-label",children:m.createdLabel}),o("span",{className:"quote-management-manage-negotiable-quote-template__detail-content","data-testid":"created-value",children:[p.format(new Date(a.createdAt))," (",a.buyer.firstname," ",a.buyer.lastname,")"]})]}),a.salesRepName&&o("div",{className:"quote-management-manage-negotiable-quote-template__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote-template__detail-title","data-testid":"sales-rep-label",children:m.salesRepLabel}),t("span",{className:"quote-management-manage-negotiable-quote-template__detail-content","data-testid":"sales-rep-value",children:a.salesRepName})]}),x&&o("div",{className:"quote-management-manage-negotiable-quote-template__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote-template__detail-title","data-testid":"expires-label",children:m.expiresLabel}),t("span",{className:"quote-management-manage-negotiable-quote-template__detail-content","data-testid":"expires-value",children:x})]})]})},[e==null?void 0:e.Details,m,a]),f=c(()=>{if(!(!(a!=null&&a.referenceDocuments)||a.referenceDocuments.length===0))return t(r,{name:"ReferenceDocumentsTitle",slot:e==null?void 0:e.ReferenceDocumentsTitle,context:{templateData:a},children:t("h2",{children:m.referenceDocumentsTitle})})},[e==null?void 0:e.ReferenceDocumentsTitle,m,a]),_=c(()=>{if(!(!(a!=null&&a.referenceDocuments)||a.referenceDocuments.length===0))return t(r,{name:"ReferenceDocuments",slot:e==null?void 0:e.ReferenceDocuments,context:{templateData:a},children:t("ul",{"data-testid":"reference-documents",children:a.referenceDocuments.map(l=>t("li",{children:t("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",children:l.name})},l.uid))})})},[e==null?void 0:e.ReferenceDocuments,a]),N=c(()=>t(r,{name:"ItemsTable",slot:e==null?void 0:e.ItemsTable,context:{templateData:a},children:t(S,{tabs:new Map([["items-quoted",m.itemsQuotedTab],["comments",m.commentsTab],["history-log",m.historyLogTab]]),tabsContent:new Map([["items-quoted",t(r,{name:"ItemsQuotedTab",slot:e==null?void 0:e.ItemsQuotedTab,context:{templateData:a},children:t(W,{templateData:a})},"items-quoted")],["comments",t(r,{name:"CommentsTab",slot:e==null?void 0:e.CommentsTab,context:{templateData:a},children:t(k,{templateData:a})},"comments")],["history-log",t(r,{name:"HistoryLogTab",slot:e==null?void 0:e.HistoryLogTab,context:{templateData:a},children:t(z,{templateData:a})},"history-log")]])})}),[e==null?void 0:e.ItemsTable,e==null?void 0:e.ItemsQuotedTab,e==null?void 0:e.CommentsTab,e==null?void 0:e.HistoryLogTab,m,a]),y=c(()=>t(r,{name:"CommentsTitle",slot:e==null?void 0:e.CommentsTitle,context:{templateData:a},children:t("h2",{children:m.commentsTitle})}),[e==null?void 0:e.CommentsTitle,m,a]),L=c(()=>t(r,{name:"Comments",slot:e==null?void 0:e.Comments,context:{templateData:a},children:"TODO: Not yet implemented."}),[e==null?void 0:e.Comments,a]),v=c(()=>t(r,{name:"HistoryLogTitle",slot:e==null?void 0:e.HistoryLogTitle,context:{templateData:a},children:t("h2",{children:m.historyLogTitle})}),[e==null?void 0:e.HistoryLogTitle,m,a]),C=c(()=>t(r,{name:"HistoryLog",slot:e==null?void 0:e.HistoryLog,context:{templateData:a},children:"TODO: Not yet implemented."}),[e==null?void 0:e.HistoryLog,a]),D={...Q,loading:h,templateName:g,templateId:d,details:q,referenceDocumentsTitle:f,referenceDocuments:_,itemsTable:N,commentsTitle:y,comments:L,historyLogTitle:v,historyLog:C};return t(j,{...D})};export{ce as ManageNegotiableQuoteTemplate,ce as default};
//# sourceMappingURL=ManageNegotiableQuoteTemplate.js.map
